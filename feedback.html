<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Geri Bildirim</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .form-container {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      width: 100%;
      max-width: 400px;
    }

    .form-container h2 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
    }

    .form-container input,
    .form-container textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    .form-container button {
      width: 100%;
      background-color: #e53935;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .form-container button:hover {
      background-color: #c62828;
    }

    .message {
      margin-top: 15px;
      text-align: center;
      font-size: 14px;
    }

    .message.success {
      color: green;
    }

    .message.error {
      color: red;
    }
  </style>
</head>
<body>

  <div class="form-container">
    <h2>Geri Bildirim</h2>
    <form id="feedbackForm">
      <input type="text" name="from_name" placeholder="Adınız" required />
      <input type="email" name="reply_to" placeholder="Email adresiniz" required />
      <textarea name="message" placeholder="Mesajınız" rows="5" required></textarea>
      <input type="file" id="fileUploader" />
      <button type="submit">Gönder</button>
    </form>
    <div id="formMessage" class="message"></div>
  </div>

  <script>
    (function(){
      emailjs.init("nZhswCE3wFotH-7Fh"); // PUBLIC KEY
    })();

    document.getElementById('feedbackForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const fileInput = document.getElementById('fileUploader');
      const file = fileInput.files[0];
      const messageBox = document.getElementById("formMessage");

      if (!file) {
        messageBox.textContent = "Lütfen bir dosya seçin.";
        messageBox.className = "message error";
        return;
      }

      const reader = new FileReader();
      reader.onload = function() {
        const base64File = reader.result.split(',')[1];

        emailjs.send("service_ogkkluj", "template_pwm0949", {
          from_name: document.querySelector('input[name="from_name"]').value,
          reply_to: document.querySelector('input[name="reply_to"]').value,
          message: document.querySelector('textarea[name="message"]').value,
          attachment: base64File,
          filename: file.name
        }).then(function(response) {
          messageBox.textContent = "Mesaj başarıyla gönderildi!";
          messageBox.className = "message success";
        }, function(error) {
          messageBox.textContent = "Hata oluştu: " + error.text;
          messageBox.className = "message error";
        });
      };

      reader.readAsDataURL(file);
    });
  </script>

</body>
</html>